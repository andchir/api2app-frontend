# Создание конфигурации API

У Вас уже должно быть готово **API**, написанное с использованием одного из серверных языков программирования.
  
Для **создания приложения** сначала нужно добавить **конфигурацию** и протестировать API.  
  
1. Перейти в раздел "API" -> "Мои API". Нажать кнопку "Добавить новый API".  
  
2. Ввести название API, URL (адрес) запроса, выбрать метод запроса (GET, POST и т.д.), добавить параметры запроса.  
  
![Скриншот 1](https://api2app.org/media/uploads/1729370107_docs_api_01.png)

  
3. Нажать кнопку "Тест" для тестирования работы API.   
  
4. Если Вы используете заголовки авторизации или другие приватные данные, не забудьте включить режим приватности для этого поля (заголовка). Помните, что приватность работает только в режиме "Сервер".  
  
![Скриншот 2](https://api2app.org/media/uploads/1729370128_docs_api_02.png)

  
5. Некоторые API не работают напрямую при запуске в браузере, для таких необходимо использовать режим "Сервер" (переключатель справа от кнопки "Тест").  В этом режиме запрос сначала идёт на сервер api2app, а с этого сервера отправляется на сервер Вашего API.  
  
6. Можно установить число максимальных дневных использований (в том числе только для уникальных IP-адресов) в настройках приложения. При превышении этого числа пользователю будет показано текстовое сообщение.  

![Скриншот 3](https://api2app.org/media/uploads/1751138442_ksnip_20250628-221623.png)

7. После тестирования в поле "Предпросмотр" появится ответ сервера. Если это ответ в формате JSON (в большинстве случаев), можно убрать лишнюю или секретную информацию и сохранить. Эта информация будет также фильтроваться при получении ответа в приложении.  
  
8. На странице списка API можно нажать кнопку "Поделиться", в появившемся окне нажать "Сделать публичным", тогда любой желающий сможет протестировать API без регистрации. Если сделать API скрытым, то страница тестирования будет доступна только по публичной ссылке.   
  
![Скриншот 4](https://api2app.org/media/uploads/1729370164_docs_api_04.png)

# Шаблоны значений полей

Значения полей могут формироваться по шаблону. Создание шаблонов поддерживается на вкладке "Сырые данные" в виде JSON.
Пример:
```json
{
    "prompt": "A {gender} is {action} in the office",
    "__prompt:place=office": "A {gender} is {action} in the office",
    "__prompt:place=street": "A {gender} is {action} on the street",
    "__prompt:place=forest": "A {gender} is {action} in the forest",
    "__inner": {
        "gender": "woman",
        "action": "jumping",
        "place": "street"
    }
}
```

Все поля с префиксом "__" (двойное нижнее подчёркивание) будут удалены из тела запроса. Поля, перечисленные в поле **"__inner"** будут использованы при создании окончательных значений полей (в данном случае поля "prompt"). Эти поля можно использовать в приложении с привязкой к элементам.  
Если **"place" = "street"**, будет использован шаблон из поля **"__prompt:place=street"**.  
В итоге будет отправлено такое тело запроса:
```json
{
    "prompt": "A woman is jumping on the street"
}
```
# Создание приложений

Для создания мини-приложений ВК и Телеграм - использовать URL встраивания из окна "Поделиться".  
![Скриншот - Поделиться](https://api2app.org/media/uploads/1754148857_ksnip_20250802-141702.png)  

Для встраивания приложения на веб-сайт можно использовать JS-скрипт:  
[https://github.com/andchir/api2app-chat-widget](https://github.com/andchir/api2app-chat-widget)  
Пример кода:  
```html
<script src="https://andchir.github.io/api2app-chat-widget/api2app-chat-widget.js"></script>
<script>
    const chatWidget = new Api2AppChatWidget(
        'https://api2app.org/ru/apps/embed/your-app-embed-id', { // Это URL встраивания приложения
            buttonColor: '#007bff',
            hoverColor: '#0056b3',
            position: 'bottom-right',
            width: 350,
            height: 465
        });
</script>
```

# Создание Телеграм бота

Сначала нужно создать чат-бота в Телеграм. Для этого запустить бота **"BotFather"** и ввести команду **"/newbot"**.  

Ввести название и юзернейм бота. Можно ещё отредактировать бота, добавив ему картинку и описание.  

![Скриншот 1](https://api2app.org/media/uploads/1750521824_eb36e991deb26d52208849ad6c2e23b7.jpg)

Скопировать **токен** и перейти на сайт **api2app**. В режиме редактирования приложения нажать кнопку **"Настройки"**. В поле **"Токен чат-бота Телеграм"** вставить токен бота, закрыть окно и нажать кнопку "Сохранить".  

![Скриншот 1](https://api2app.org/media/uploads/1750521911_1fb5907af1f627d9d739d53d4464a156.jpg)

Это все основные действия, при сохранении настраивается вебхух бота и меню. У бота должно появиться меню, он должен начать отвечать на команды и запросы.  

![Скриншот 1](https://api2app.org/media/uploads/1750521998_24508d6ce17d86a5ec1a874151eff91e.jpg)

Бот уже полностью рабочий, но можно добавить команды для вывода дополнительной информации. Например, в приложении есть текст с названием поля **"info"**. Чтобы вывести этот текст в боте, нужно в свойствах этого поля названию дать префикс **"app_"** или **"bot_"**. Теперь в боте появится дополнительная команда **"app_info"**, которая будет выводить соответствующий текст.

Статья на Хабр:  
https://habr.com/ru/articles/906992/

# Платежи за использование

Любой владелец приложения может принимать платежи за его использование. Для этого нужно зарегистрироваться в платежном агрегаторе **Robokassa** и в своём профиле на сайте **api2app** ввести логин и два пароля на вкладке **"Платежи"**.  

![Скиншот1](https://api2app.org/media/uploads/1750523286_ksnip_20250621-192741.png)  

Перейдите в личный кабинет системы **Robokassa**, затем в настройки магазина. На вкладке **"Технические настройки"** сгенерируйте **два пароля** и скопируйте их. Алгоритм расчета хеша - **MD5**. Также нужно ввести **"Result URL"**, **"Success URL"**, **"Fail URL"**. Метод отсылки данных - везде **POST**. Взять все URL можно в своём профиле на сайте **api2app** на вкладке "Платежи".  

![Скриншот2](https://api2app.org/media/uploads/1750523500_ksnip_20250621-193048.png)  

**Цена использования** приложения указывается в настройках приложения, но эта цена только для показа, т.к. в реальности окончательная цена может складываться из цен отдельных API. Реальную цену нужно указать **в настройках API**.  

Рекомендуется указывать цену только в одном основном API приложения и эту же цену указать в настройках приложения.  

Для API платных приложений рекомендуется отключить дневной лимит использования - ввести значение "0" в поле "Макс. дневное использование".
